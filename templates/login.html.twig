{% extends 'base.html.twig' %}

{% block title %}Connexion - Zoo Arcadia{% endblock %}

{% block stylesheets %}
{{ parent() }}
<style>
    .login-container {
        min-height: 85vh;
        display: flex;
        align-items: center;
        justify-content: center;
        background: linear-gradient(to right, #e6f0e6, #fdfaf4);
    }

    .login-card {
        background-color: #f5f1ea;
        border-radius: 1rem;
        padding: 2rem;
        max-width: 420px;
        width: 100%;
        box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
        animation: fadeIn 0.5s ease-in-out;
    }

    @keyframes fadeIn {
        from { opacity: 0; transform: translateY(10px); }
        to { opacity: 1; transform: translateY(0); }
    }

    .login-title {
        color: #3b5d3b;
    }

    .btn-login {
        background-color: #3b5d3b;
        color: #fff;
        border: none;
        border-radius: 10px;
        padding: 0.6rem 1.5rem;
        transition: background-color 0.3s ease, transform 0.3s ease;
    }

    .btn-login:hover {
        background-color: #2e4a2f;
        transform: scale(1.02);
    }

    .btn-eye {
        border: none;
        background: transparent;
        color: #666;
    }
</style>
{% endblock %}

{% block body %}
<div class="login-container">
    <div class="login-card">
        <div class="text-center mb-4">
            <i class="bi bi-shield-lock-fill fs-1 text-success"></i>
            <h2 class="mt-2 login-title">Connexion</h2>
            <p class="text-muted">Accédez à votre espace sécurisé</p>
        </div>

        {% if error %}
            <div class="alert alert-danger" role="alert">
                Identifiants incorrects. Veuillez réessayer.
            </div>
        {% endif %}

        <form method="post" action="{{ path('login') }}" aria-label="Formulaire de connexion">
            <div class="mb-3">
                <label for="username" class="form-label">Adresse e-mail</label>
                <input type="email" id="username" name="_username" class="form-control" value="{{ last_username }}"
                       required autocomplete="username" aria-describedby="emailHelp"
                       placeholder="exemple@arcadia.com">
            </div>

            <div class="mb-3 position-relative">
                <label for="password" class="form-label">Mot de passe</label>
                <div class="input-group">
                    <input type="password" id="password" name="_password" class="form-control"
                           required autocomplete="current-password" placeholder="••••••••••••••••••••">
                    <button type="button" class="btn-eye" onclick="togglePassword()" aria-label="Afficher ou masquer le mot de passe">
                        <i class="bi bi-eye-slash" id="toggleIcon"></i>
                    </button>
                </div>
            </div>

            <div class="d-grid mb-3">
                <button type="submit" class="btn btn-login">Se connecter</button>
            </div>

            <p class="text-center">
                <a href="#" class="text-muted text-decoration-none">Mot de passe oublié ?</a>
            </p>
        </form>
    </div>
</div>

<script>
    function togglePassword() {
        const pwdField = document.getElementById("password");
        const icon = document.getElementById("toggleIcon");
        if (pwdField.type === "password") {
            pwdField.type = "text";
            icon.classList.replace("bi-eye-slash", "bi-eye");
        } else {
            pwdField.type = "password";
            icon.classList.replace("bi-eye", "bi-eye-slash");
        }
    }
</script>
{% endblock %}

